(this["webpackJsonpe-commerce-template"]=this["webpackJsonpe-commerce-template"]||[]).push([[13],{203:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var n=t(5),c=t(208),s=t(11),r=(t(239),t(1)),o=t.n(r),l=t(57),i=t(4),m=t(241),u=t(240),d=t(214),b=t(209),g=t(210),f=(t(213),Object(r.lazy)((function(){return Promise.all([t.e(0),t.e(2),t.e(6)]).then(t.bind(null,211))}))),v=Object(r.lazy)((function(){return t.e(23).then(t.bind(null,247))})),p=Object(r.lazy)((function(){return t.e(24).then(t.bind(null,248))})),E=Object(r.lazy)((function(){return Promise.all([t.e(7),t.e(4)]).then(t.bind(null,218))})),h=Object(r.lazy)((function(){return t.e(5).then(t.bind(null,219))}));function j(e){var a={toPay:"Aguarda Pagamento",payed:"Pago verifique nos comentarios a data de entrega",finalized:"Pago e entregue",old:"Should not be here",val:function(e){return a[e]||""},warning:function(e){var t="";switch(a[e]){case a.toPay:t="Devolvemos o dinheiro, at\xe9 ao dia antes da entrega.";break;case a.payed:t="Se n\xe3o defeniu a sua morada como verdadeiramente queria, por favor envie uma mensagem a vendedora com a nova morada.";break;case a.finalized:t="Concluio a sua compra com sucesso!";break;case a.old:t="Should not be here"}return t}},t=[{name:"Enviar resposta",callback:function(){ne.replaceAll(" ","")&&(e.setIsLoading(!0),l.b(_,ne).then((function(a){a.conversations?(P([S[0]].concat(Object(s.a)(a.conversations))),le(Object(c.a)(Object(c.a)({},oe),{},{isVisible:!1})),ce("")):le({title:"Erro",message:"Erro a enviar mensagem: Poder\xe1 ter sido falha no sistema ou voc\xea ja excedeu o limite de 3 messagens. Se assim for por favor, aguarde a resposta do vendedor!",actions:[{name:"Ok",callback:function(){le({title:"Messagens",message:j(),actions:t,isWarning:!1,isVisible:!1})}}],isWarning:!0,isVisible:!0}),e.setIsLoading(!1)})).catch((function(a){console.log(a),e.setIsLoading(!1)})))}},{name:"N\xe3o",callback:function(){le(Object(c.a)(Object(c.a)({},oe),{},{isVisible:!1}))}}],j=function(){return o.a.createElement("div",null,o.a.createElement("p",null,S.length?S[S.length-1].message.substring(0,50)+"...":""),o.a.createElement("textarea",{id:"messages",name:"messages",className:"form-control col-sm",placeholder:"Escreva aqui a sua mensagem...",required:!0,value:ne,onChange:function(e){ce(e.target.value)}}))},O=Object(r.useState)({}),y=Object(n.a)(O,2),N=y[0],w=y[1],k=Object(r.useState)([]),x=Object(n.a)(k,2),S=x[0],P=x[1],I=Object(r.useState)("list"),L=Object(n.a)(I,1)[0],q=Object(r.useState)(0),C=Object(n.a)(q,2),F=C[0],z=C[1],M=Object(r.useState)(""),D=Object(n.a)(M,2),V=D[0],A=D[1],T=Object(r.useState)(""),W=Object(n.a)(T,2),J=W[0],Q=W[1],B=Object(r.useState)([]),G=Object(n.a)(B,2),H=G[0],K=G[1],R=Object(r.useState)(""),U=Object(n.a)(R,2),X=U[0],Y=U[1],Z=Object(r.useState)(""),$=Object(n.a)(Z,2),_=$[0],ee=$[1],ae=Object(r.useState)(""),te=Object(n.a)(ae,2),ne=te[0],ce=te[1],se=Object(r.useState)({title:"Messagens",message:j(),actions:t,isWarning:!1,isVisible:!1}),re=Object(n.a)(se,2),oe=re[0],le=re[1],ie=Object(r.useState)(),me=Object(n.a)(ie,2),ue=me[0],de=me[1],be=Object(b.a)(d.useMediaQuery,"md");Object(r.useEffect)((function(){le(Object(c.a)(Object(c.a)({},oe),{},{message:j(),actions:t}))}),[ne]),Object(r.useEffect)((function(){return function(){ue&&clearInterval(ue)}}),[]);var ge=function(e){var a=Object(i.m)();return o.a.createElement("button",{type:"button",className:"btn btn-sm btn-primary base-button-color",title:"navigate",onClick:function(){a(e.route)}},e.text)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.LightgalleryProvider,null,o.a.createElement("div",{className:"p-5 bg-primary bs-cover",style:{backgroundImage:"url(../../images/LenaTestProducts/banner.png)"}},o.a.createElement("div",{className:"container text-center header-fpv"},be?o.a.createElement(o.a.Fragment,null):o.a.createElement(ge,{text:"Products",route:"/Products"}),o.a.createElement("span",{className:"display-5 px-3 bg-white rounded shadow"},"Seguimento de Encomenda"),o.a.createElement("div",{className:"actions-md-fpv"},o.a.createElement(E,{isFollowMD:be}),be?o.a.createElement(ge,{text:"Products",route:"/Products"}):o.a.createElement(o.a.Fragment,null)))),o.a.createElement("div",{className:"container-fluid mb-3 follow-data-container-fpv"},o.a.createElement("div",{className:"row"},be?o.a.createElement(o.a.Fragment,null):o.a.createElement("div",{className:"col-md-4"},o.a.createElement("div",{className:"row g-3 follow-overload-fpv"},"list"===L&&H.map((function(e,a){return o.a.createElement("div",{key:a,className:"col-md-12"},o.a.createElement(f,{data:e,photos:N,setPhotos:w}))})))),H.length>0?o.a.createElement("div",{className:"col-md-4 indication-follow-purchase-fpv"},o.a.createElement(v,{title:"Estado da Encomenda",bodyMessage:V}),o.a.createElement(v,{title:"Total Encomenda",bodyMessage:F+"\u20ac"}),o.a.createElement(v,{title:"Avisos",bodyMessage:J,isList:!0})):o.a.createElement(o.a.Fragment,null),o.a.createElement("div",{className:"col-md-4"},o.a.createElement("div",{className:"messages-follow-container-fpv"},S.map((function(e,a){return o.a.createElement(p,{key:a,user:e.sender,message:e.message})}))),S.length?o.a.createElement("div",{className:"conversation-fpv"},o.a.createElement("button",{type:"button",className:"btn btn-sm btn-primary base-button-color",title:"search",onClick:function(){le(Object(c.a)(Object(c.a)({},oe),{},{isVisible:!0}))}},o.a.createElement(u.a,{className:"icon-fpv"}))):o.a.createElement(o.a.Fragment,null)),be?o.a.createElement("div",{className:"col-md-4 margins-md-fpv"},o.a.createElement("div",{className:"row g-3 follow-overload-fpv"},"list"===L&&H.map((function(e,a){return o.a.createElement("div",{key:a,className:"col-md-12"},o.a.createElement(f,{data:e,photos:N,setPhotos:w}))})))):o.a.createElement(o.a.Fragment,null))),o.a.createElement("div",{className:"follow-basket-fpv container"},o.a.createElement("div",{className:"input-container-fpv"},o.a.createElement("span",{className:"col-sm-1"},"ID da Compra"),o.a.createElement("input",{id:"follow-id",name:"followid",type:"text",className:"form-control col-sm",placeholder:"ID",required:!0,value:X,onChange:function(e){return Y(e.target.value)}}),o.a.createElement("button",{type:"button",className:"btn btn-sm btn-primary base-button-color",title:"search",onClick:function(){e.setIsLoading(!0);var t=X,n=function(){console.log("updates"),l.g(t).then((function(t){if(t.details&&t.products&&t.conversations&&t.conversations.messages){var n=new Date(t.details.date).toLocaleDateString("pt-PT");P([{sender:"c",message:"Conversa Autom\xe1tica - ".concat(n," - ").concat(t.details.address," - ").concat(t.details.phone)}].concat(Object(s.a)(t.conversations.messages))),z(t.details.priceTotal),A(a.val(t.details.state)),K(t.products.products),ee(X),l.c(t.details.state).then((function(e){Q(e.config)}))}e.setIsLoading(!1)})).catch((function(a){e.setIsLoading(!1)}))};ue&&clearInterval(ue);var c=setInterval(n,1e4);n(),de(c)}},o.a.createElement(m.a,{className:"icon-fpv"})))),o.a.createElement(h,oe),o.a.createElement("div",{hidden:!0},Object.keys(N).map((function(e,a){return N[e].map((function(t,n){return o.a.createElement(g.LightgalleryItem,{key:a,group:e,src:t},o.a.createElement("img",{src:t,style:{width:"100%"},alt:""}))}))})))))}},209:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var n=function(e,a){var t=e({query:"(min-width: 1824px)"}),n=e({query:"(max-width: 1224px)"}),c=e({query:"(max-width: 766px)"}),s=e({query:"(max-width: 450px)"}),r=e({query:"(max-width: 360px)"});switch(a){case"xl":return t;case"lg":return n;case"md":return c;case"smd":return s;case"sm":return r;default:return!1}}},239:function(e,a,t){}}]);
//# sourceMappingURL=13.03bd93c4.chunk.js.map